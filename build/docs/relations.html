<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <title>Spine JS</title>
  </head>
  <body>
    <div role="navigation" class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="https://github.com/spine/spine" title="Source on Github" class="navbar-brand">Spine</a>
          <p id="docVersion" class="navbar-text">v1.6.2</p>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/">Home</a></li>
            <li><a href="docs/">Documentation</a></li>
            <li><a href="https://github.com/spine/spine">GitHub</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container col-sm-3">
      <h2>Documentation</h2>
      <article>
        <div>
          <h3><a href="introduction.html">Introduction</a></h3><span>Overview of Spine</span>
        </div>
        <div>
          <h3><a href="started.html">Getting started</a></h3><span>Getting started with Spine</span>
        </div>
        <div>
          <h3><a href="controllers.html">Controllers</a></h3><span>Intro to Spine's Controllers</span>
        </div>
        <div>
          <h3><a href="models.html">Models</a></h3><span>Data storage and manipulation</span>
        </div>
        <div>
          <h3><a href="events.html">Events</a></h3><span>Custom and controller events</span>
        </div>
        <div>
          <h3><a href="routing.html">Routing</a></h3><span>HTML5 history and hash support</span>
        </div>
        <div>
          <h3><a href="views.html">Views</a></h3><span>JS Template rendering</span>
        </div>
        <div>
          <h3><a href="example.html">Examples</a></h3><span>TodoList example</span>
        </div>
        <div>
          <h3><a href="bindings.html">Two-Way Bindings</a></h3><span>Expiremental Two-Way binding module</span>
        </div>
      </article>
      <h2>Guides</h2>
      <article>
        <div>
          <h3><a href="controller_patterns.html">Controller patterns</a></h3><span>Common controller abstractions</span>
        </div>
        <div>
          <h3><a href="manager.html">Manager</a></h3><span>Controller state machine</span>
        </div>
        <div>
          <h3><a href="forms.html">Forms & Validation</a></h3><span>Process forms and validate models</span>
        </div>
        <div>
          <h3><a href="ajax.html">Ajax</a></h3><span>Custom Ajax integration with models</span>
        </div>
        <div>
          <h3><a href="hem.html">Hem</a></h3><span>Dependency management with Hem</span>
        </div>
        <div>
          <h3><a href="app.html">Spine.app</a></h3><span>Generating Spine Apps</span>
        </div>
        <div>
          <h3><a href="rails.html">Rails integration</a></h3><span>Integrate Spine with Rails using REST</span>
        </div>
        <div>
          <h3><a href="realtime.html">Realtime apps</a></h3><span>Make your Spine app realtime!</span>
        </div>
      </article>
    </div>
    <div class="container col-sm-9"><p>Spine provides a number of ways of handling relationships between models, such as <em>has many</em> and <em>belongs to</em> relationships.</p>
<p>However, ideally you should try and abstract relationships out of your models on the client-side if they’re not absolutely necessary. Checkout <em>A note on API design</em> in the <a href="/docs/%=%20docs_path(%22ajax%22">Ajax guide</a> %&gt;) for more information. Anyway, if relationships are necessary, here’s how to use them. </p>
<p>##Usage</p>
<p>Spine’s relationship logic is available in a separate module to the rest of the library, <a href="https://raw.github.com/spine/spine/master/lib/relation.js">relation.js</a>. You’ll need to include that in your application before continuing. </p>
<p>##Has many associations</p>
<p>You can set up <em>has many</em> associations by using <code>hasMany(name, path)</code>. For example:</p>
<pre><code>//= CoffeeScript
class Photo extends Spine.Model
  @configure &#39;Photo&#39;

  @belongsTo &#39;album&#39;, &#39;Album&#39;

class Album extends Spine.Model
  @configure &#39;Album&#39;, &#39;name&#39;

  @hasMany &#39;photos&#39;, &#39;models/photo&#39;

//= JavaScript
var Photo = Spine.Model.sub();
Photo.configure(&#39;Photo&#39;);
Photo.belongsTo(&#39;album&#39;, &#39;Album&#39;);

var Album = Spine.Model.sub();
Album.configure(&#39;Album&#39;, &#39;name);

Album.hasMany(&#39;photos&#39;, &#39;Photo&#39;);
</code></pre><p>The <code>hasMany()</code> function takes the name of the association, the path to the associated model, and an optional foreign key. </p>
<p>If you’re using <a href="/docs/%=%20docs_path(%22commonjs%22">CommonJS modules</a> %&gt;), than use the path to the model as you’d <code>require()</code> it. In the example above, this is <code>models/photo</code>. Otherwise, pass a string indicating the global available variable referring to the associated model, in this case <code>Photo</code>.</p>
<p>Usage is fairly straightforward. The association gives you a few functions, such as <code>all()</code>, <code>find()</code> and <code>create()</code>:</p>
<pre><code>//= CoffeeScript  
album = Album.create()

# Fetch all album&#39;s photos
album.photos().all()

album.photos().create(
  name: &quot;First photo&quot;
)

album.photos().find( Photo.first().id )
</code></pre><p>##Belongs to associations</p>
<p>A <em>belongs to</em> association is very similar, using the <code>belongsTo(name, path)</code> function.</p>
<pre><code>//= CoffeeScript
class Album extends Spine.Model
  @configure &#39;Album&#39;, &#39;name&#39;

class Photo extends Spine.Model
  @configure &#39;Photo&#39;

  @belongsTo &#39;album&#39;, &#39;Album&#39;

//= JavaScript
var Album = Spine.Model.sub();
Album.configure(&#39;Album&#39;, &#39;name);

var Photo = Spine.Model.sub();
Photo.configure(&#39;Photo&#39;);
Photo.belongsTo(&#39;album&#39;, &#39;Album&#39;);
</code></pre><p>Like <code>hasMany()</code>, the <code>belongsTo()</code> function gives you an relationship property on record instances, in this case called <code>album</code>.</p>
<pre><code>//= CoffeeScript
album = Album.create({name: &quot;First Album&quot;})
photo = Photo.create({album: album})

assertEqual( photo.album(), album )
assertEqual( photo.album_id, album.id )
</code></pre></div>
  </body>
</html>