<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <title>Spine JS</title>
  </head>
  <body>
    <div role="navigation" class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="https://github.com/spine/spine" title="Source on Github" class="navbar-brand">Spine</a>
          <p id="docVersion" class="navbar-text">v1.6.2</p>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/">Home</a></li>
            <li><a href="docs/">Documentation</a></li>
            <li><a href="https://github.com/spine/spine">GitHub</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container col-sm-3">
      <h2>Documentation</h2>
      <article>
        <div>
          <h3><a href="introduction.html">Introduction</a></h3><span>Overview of Spine</span>
        </div>
        <div>
          <h3><a href="started.html">Getting started</a></h3><span>Getting started with Spine</span>
        </div>
        <div>
          <h3><a href="controllers.html">Controllers</a></h3><span>Intro to Spine's Controllers</span>
        </div>
        <div>
          <h3><a href="models.html">Models</a></h3><span>Data storage and manipulation</span>
        </div>
        <div>
          <h3><a href="events.html">Events</a></h3><span>Custom and controller events</span>
        </div>
        <div>
          <h3><a href="routing.html">Routing</a></h3><span>HTML5 history and hash support</span>
        </div>
        <div>
          <h3><a href="views.html">Views</a></h3><span>JS Template rendering</span>
        </div>
        <div>
          <h3><a href="example.html">Examples</a></h3><span>TodoList example</span>
        </div>
        <div>
          <h3><a href="bindings.html">Two-Way Bindings</a></h3><span>Expiremental Two-Way binding module</span>
        </div>
      </article>
      <h2>Guides</h2>
      <article>
        <div>
          <h3><a href="controller_patterns.html">Controller patterns</a></h3><span>Common controller abstractions</span>
        </div>
        <div>
          <h3><a href="manager.html">Manager</a></h3><span>Controller state machine</span>
        </div>
        <div>
          <h3><a href="forms.html">Forms & Validation</a></h3><span>Process forms and validate models</span>
        </div>
        <div>
          <h3><a href="ajax.html">Ajax</a></h3><span>Custom Ajax integration with models</span>
        </div>
        <div>
          <h3><a href="hem.html">Hem</a></h3><span>Dependency management with Hem</span>
        </div>
        <div>
          <h3><a href="app.html">Spine.app</a></h3><span>Generating Spine Apps</span>
        </div>
        <div>
          <h3><a href="rails.html">Rails integration</a></h3><span>Integrate Spine with Rails using REST</span>
        </div>
        <div>
          <h3><a href="realtime.html">Realtime apps</a></h3><span>Make your Spine app realtime!</span>
        </div>
      </article>
    </div>
    <div class="container col-sm-9"><p><code>Spine.Manager</code> is essentially a state machine for controllers. Controllers are added to the manager, and the manager controls state for its associated controllers. A controller’s state is either <em>active</em> or <em>deactive</em>. <code>Spine.Manager</code> ensures that only one controller is active at any one time; when another controller is ‘activated’, all other controllers in the manager will be deactivated. </p>
<p>Managers are great for having a set of views, and ensuring that only one of those views is displayed at any one time. </p>
<p>##Stacks</p>
<p>You may find it easier to use <a href="/docs/%=%20docs_path(%22stacks%22">Spine’s Stacks</a> %&gt;), as they abstract Managers providing a more high level API.</p>
<pre><code>//= CoffeeScript
class PostsShow extends Spine.Controller
class PostsEdit extends Spine.Controller

class Posts extends Spine.Stack
  controllers:
    show: PostsShow
    edit: PostsEdit

posts = new Posts
posts.show # &lt;PostsShow&gt;

posts.show.active()
posts.show.isActive() # true
posts.edit.isActive() # false

//= JavaScript
var PostsShow = Spine.Controller.sub();
var PostsEdit = Spine.Controller.sub();

var Posts = Spine.Stack.sub({
  controllers: {
    show: PostsShow,
    edit: PostsEdit
  }
});

var posts = new Posts
posts.show // &lt;PostsShow&gt;

posts.show.active();
posts.show.isActive(); // true
posts.edit.isActive(); // false
</code></pre><p>See the <a href="/docs/%=%20docs_path(%22stacks%22">Stacks guide</a> %&gt;) for more information.</p>
<p>##Usage</p>
<p>To use the <code>Manager</code> class, we first need to include the <em>manager.js</em> script, which you can find in <a href="https://github.com/spine/spine/raw/master/lib/manager.js">Spine’s repository</a>. Let’s demonstrate this by creating a couple of controllers, adding them to a <code>Manager</code> instance, and change their state. </p>
<pre><code>//= CoffeeScript
class Users extends Spine.Controller
class Groups extends Spine.Controller

users  = new Users
groups = new Groups

new Spine.Manager(users, groups)

users.active()
assert( users.isActive() )
assert( !groups.isActive() )

groups.active()
assert( groups.isActive() )
assert( !users.isActive() )

//= JavaScript
var Users = Spine.Controller.sub();
var Groups = Spine.Controller.sub();

var users = new Users;
var groups = new Groups;

new Spine.Manager(users, groups);

users.active();
assert( users.isActive() );
assert( !groups.isActive() );

groups.active();
assert( groups.isActive() );
assert( !users.isActive() );
</code></pre><p>So, as you can see above, Spine gives your controllers an <code>isActive()</code> function which returns a boolean indicating whether the controller’s state is <em>active</em>. In addition, we now have an <code>active()</code> function which we can call on controllers to activate them. </p>
<p>The manager ensures that only one controller in its set is activated at any one time. When the <code>users</code> controller is activated (by calling <code>active()</code>), the groups controller will be deactivated, and vice versa. </p>
<p>When a controller is activated, its <code>activate()</code> function will be called. Likewise, when it’s deactivated, its <code>deactivate()</code> function will be called. These are already implemented, but you can override them to add custom behavior.</p>
<p>By default, the controller’s <code>activate()</code> function adds an <em>active</em> class onto the controller’s element (<code>el</code>). The <code>deactivate()</code> function removes this class.</p>
<pre><code>//= CoffeeScript
# ...
activate: -&gt;
  @el.addClass(&quot;active&quot;)
  @

deactivate: -&gt;
  @el.removeClass(&quot;active&quot;)
  @
</code></pre><p>Hopefully you’re starting to see how we can apply this to showing and hiding views. Take <a href="http://github.com/maccman/holla">Holla</a> for instance. It has a settings view, and a channel view - both associated with controllers. They need to be displayed independently, and changed using the sidebar menu. </p>
<p>The simplest way of achieving this is by adding them both to a <code>Manager</code>, which will ensure that only one has an <em>active</em> class at any one time. Then, with CSS, we can hide views without the <em>active</em> class.</p>
<pre><code>#views &gt; *:not(.active) {
  display: none !important;
}
</code></pre><p>When the two controllers are activated by the sidebar menu, the <em>active</em> class switches and the relevant view is shown.</p>
<p>##Spine Mobile</p>
<p>Managers are behind all the <a href="/docs/%=%20mobile_path(%22transitions%22">view transitions</a> %&gt;) in Spine Mobile. Checkout the <a href="https://github.com/maccman/spine.mobile">Spine Mobile source</a>, especially the <a href="https://github.com/maccman/spine.mobile/blob/master/src/stage.coffee">Stage controller</a>, for a good example of overriding the <code>activate()</code> and <code>deactivate()</code> functions in order to display custom transitions. </p>
</div>
  </body>
</html>
